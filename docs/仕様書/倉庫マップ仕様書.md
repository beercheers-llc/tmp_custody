# 倉庫マップシステム仕様書

## 1. システム概要

本システムは金型管理のための倉庫マップを提供し、倉庫内の各セルの状態や使用率を視覚的に表示するシステムです。ユーザーは倉庫内の各セルの状態を一目で確認でき、詳細情報（セル情報、立面図、顧客情報、預かり品情報）を閲覧することができます。

## 2. 画面構成

システムは以下の主要コンポーネントで構成されています：

1. **ヘッダー**: ユーザー情報とログアウト機能を提供
2. **倉庫マップ**: 倉庫内のセルをグリッド形式で表示
3. **使用状況統計**: エリア別・棚タイプ別の使用率を表示
4. **フッター**: 著作権情報を表示

## 3. 倉庫マップの仕様

### 3.1 セルの表示

各セルには以下の情報が表示されます：

- **セル名**: 列と行の組み合わせ（例：A1, B2）
- **棚タイプ**: 平面、2階棚、3階棚のいずれか
- **使用率**: セルの使用率（%）

### 3.2 セルの種類

セルには以下の種類があります：

| 種類 | 説明 | 表示名 |
|------|------|--------|
| floor | 平面（床置き） | 平面 |
| shelf2 | 2階棚 | 2階棚 |
| shelf3 | 3階棚 | 3階棚 |
| aisle | 通路 | 通路 |

### 3.3 セルの状態

セルには以下の状態があります：

| 状態 | 説明 | 視覚的表現 |
|------|------|------------|
| empty | 空き | 通常表示 |
| used | 使用中 | 青い枠線 |
| scheduled-in | 入庫予定 | 緑の枠線 |
| scheduled-out | 出庫予定 | オレンジの枠線 |

### 3.4 エリア定義

倉庫は複数のエリアに分かれており、各エリアは特定の棚タイプを持ちます：

| エリア | 範囲 | 棚タイプ | 色 |
|--------|------|----------|-----|
| Aエリア | A1:J3 | 平面 | #93c5fd |
| Bエリア | A4:J6 | 2階棚 | #86efac |
| Cエリア | A7:J10 | 3階棚 | #c4b5fd |
| Dエリア | K1:T10 | 平面 | #fcd34d |
| Eエリア | U1:AD10 | 2階棚 | #f87171 |
| Fエリア | AE1:AN10 | 3階棚 | #60a5fa |
| Gエリア | AO1:AX10 | 平面 | #4ade80 |
| Hエリア | AY1:BH10 | 2階棚 | #a78bfa |
| Iエリア | BI1:BR10 | 3階棚 | #fbbf24 |
| Jエリア | BS1:CB10 | 平面 | #ec4899 |
| Kエリア | CC1:CL10 | 2階棚 | #14b8a6 |
| Lエリア | CM1:CV10 | 3階棚 | #f97316 |

### 3.5 レイアウト

- 倉庫マップは10行×100列のグリッドで構成
- 10列ごとに縦通路を設置（9, 19, 29, ...列目）
- 3行目と7行目を通路に設定

## 4. 使用状況統計の仕様

使用状況統計は以下の情報を提供します：

### 4.1 エリア別使用率

各エリアの使用率をプログレスバーで表示します。表示内容：
- エリア名
- エリアの範囲
- 棚タイプ
- 使用率（%）

### 4.2 棚タイプ別使用率

棚タイプごとの使用率をプログレスバーで表示します。表示内容：
- 棚タイプ名
- 使用中セル数/総セル数
- 使用率（%）

### 4.3 全体使用率

倉庫全体の使用率をプログレスバーで表示します。

### 4.4 統計情報

以下の統計情報を表示します：
- 総スペース数
- 使用中スペース数
- 入庫予定スペース数
- 出庫予定スペース数
- 空きスペース数
- 全体使用率（%）

## 5. セル詳細表示の仕様

セルをクリックすると、モーダルウィンドウで以下の詳細情報が表示されます。モーダルは2カラムレイアウトで構成され、左側にセル情報と立面図、右側に顧客情報と預かり品情報を表示します。

### 5.1 モーダルレイアウト

モーダルの最大幅は1000pxで、以下の2つのカラムで構成されています：

#### 左カラム：セル基本情報と立面図

- セルID
- エリア情報（名前と範囲）
- 棚タイプ
- 状態
- 使用率
- 立面図（棚タイプに応じた視覚的表現）
- 凡例（空き、使用中、入庫予定、出庫予定の色分け説明）

#### 右カラム：使用情報（顧客・預かり品情報）

- 棚レベル（階）切り替えタブ
- 顧客情報
  - 顧客名
  - 担当者
  - 電話番号
  - メールアドレス
- 預かり品情報
  - 品名
  - サイズ
  - 重量
  - 状態

### 5.2 立面図表示

立面図は棚タイプに応じて以下のように表示されます：

- **平面（床置き）**: 単一の平面として表示
- **2階棚**: 2階建ての棚として表示、使用率に応じて各階の色が変化
- **3階棚**: 3階建ての棚として表示、使用率に応じて各階の色が変化

各棚の状態は色分けで表示されます：
- 空き: グレー (#e5e7eb)
- 使用中: 青 (#93c5fd)
- 入庫予定: 緑 (#86efac)
- 出庫予定: 黄 (#fcd34d)

### 5.3 棚レベル切り替え機能

複数階の棚（2階棚、3階棚）の場合、使用中の階ごとにタブが表示され、タブをクリックすることで各階の情報を切り替えて表示できます。

- 空きの階はタブに表示されません
- タブには階数（「1階」「2階」「3階」など）が表示されます
- 選択中のタブは青色で表示されます
- タブをクリックすると、その階に関連する顧客情報と預かり品情報が表示されます

### 5.4 顧客情報表示

選択した棚レベルに保管されている預かり品の顧客情報を表示します：

- 顧客名
- 担当者名
- 電話番号
- メールアドレス

### 5.5 預かり品情報表示

選択した棚レベルに保管されている預かり品の情報を表示します：

- 品名
- サイズ
- 重量
- 状態（使用中、入庫予定、出庫予定）

## 6. データ構造

### 6.1 セルデータ

```typescript
interface WarehouseCell {
  id: string
  name: string
  type: CellType // "floor" | "shelf2" | "shelf3" | "aisle"
  status: CellStatus // "empty" | "used" | "scheduled-in" | "scheduled-out"
  usageRate: number // 0-100
  position: {
    x: number // 0-99 (A-Z, AA-CW)
    y: number // 0-9 (1-10)
  }
  area: string // エリアID
}
```

### 6.2 エリアデータ

```typescript
interface WarehouseArea {
  id: string
  name: string
  range: string
  color: string
  shelfType: CellType
  startX: number
  endX: number
  startY: number
  endY: number
}
```

### 6.3 統計データ

```typescript
interface WarehouseStatistics {
  totalSpaces: number
  usedSpaces: number
  scheduledIn: number
  scheduledOut: number
  availableSpaces: number
  usageRate: number
}
```

### 6.4 顧客データ

```typescript
interface Customer {
  id: number
  name: string      // 顧客名
  contact: string   // 担当者名
  phone: string     // 電話番号
  email: string     // メールアドレス
}
```

### 6.5 預かり品データ

```typescript
interface Item {
  id: number
  name: string      // 品名
  size: string      // サイズ
  weight: string    // 重量
  customer_id: number // 顧客ID
  status: CellStatus  // 状態
}
```
## 7. レスポンシブ対応

- ヘッダーはモバイル表示時にハンバーガーメニューに切り替わります
- 倉庫マップは横スクロールで全体を閲覧できます
- 使用状況統計はモバイル表示時に1列表示に切り替わります


## 8. 凡例

システムには以下の凡例が表示されます：

- **通路**: グレー背景
- **使用中**: 青い枠線
- **入庫予定**: 緑の枠線
- **出庫予定**: オレンジの枠線


## 9. 技術仕様

- フロントエンド: Next.js (App Router)
- スタイリング: Tailwind CSS
- UI コンポーネント: shadcn/ui
- 状態管理: React Hooks (useState, useEffect)
